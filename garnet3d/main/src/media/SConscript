Import( 'GN' )

import os.path

srcdir = str( Dir('.').srcnode().path )

def doCopy( env, sources, bldDir ):
    targets = []
    for x in sources:
        src = str(x.srcnode().path)
        dst = os.path.join( bldDir, 'media', GN.relpath( src, srcdir ) )
        targets.append( env.InstallAs( dst, src ) )
    return targets

sources = GN.glob( "*.*", True )
cluster = GN.newCustomSourceCluster( sources, doCopy )
GN.newCustomTarget( 'GNmedia', [cluster] )
